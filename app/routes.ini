; Route config

[routes]
; DB setup setup
; IMPORTANT: remove/comment this line after setup/update is finished!
GET @setup:         /setup                      [sync]  =   Exodus4D\Pathfinder\Controller\Setup->init
; login (index) page
GET @login:         /                           [sync]  =   Exodus4D\Pathfinder\Controller\AppController->init
; CCP SSO redirect
GET @sso:           /sso/@action                [sync]  =   Exodus4D\Pathfinder\Controller\Ccp\Sso->@action
; map page
GET @map:           /map*                       [sync]  =   Exodus4D\Pathfinder\Controller\MapController->init
; admin panel
GET @admin:         /admin*                     [sync]  =   Exodus4D\Pathfinder\Controller\Admin->dispatch

; AJAX API wildcard endpoints (not cached, throttled)
GET|POST /api/@controller/@action               [ajax]  =   Exodus4D\Pathfinder\Controller\Api\@controller->@action, 0, 512
GET|POST /api/@controller/@action/@arg1         [ajax]  =   Exodus4D\Pathfinder\Controller\Api\@controller->@action, 0, 512
GET|POST /api/@controller/@action/@arg1/@arg2   [ajax]  =   Exodus4D\Pathfinder\Controller\Api\@controller->@action, 0, 512

; onUnload route or final map sync (@see https://developer.mozilla.org/docs/Web/API/Navigator/sendBeacon)
POST /api/map/updateUnloadData                          =   Exodus4D\Pathfinder\Controller\Api\map->updateUnloadData, 0, 512

[maps]
; REST API wildcard endpoints (not cached, throttled)
/api/rest/@controller*                          [ajax]  =   Exodus4D\Pathfinder\Controller\Api\Rest\@controller, 0, 512
/api/rest/@controller/@id                       [ajax]  =   Exodus4D\Pathfinder\Controller\Api\Rest\@controller, 0, 512